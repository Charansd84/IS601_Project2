{% extends "base.html" %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Theme Made By www.w3schools.com - No Copyright -->
  <title>Introduction</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <style>
  .bg-1 {
    background-color: #1abc9c;
    color: #ffffff;
  }
  .bg-2 {
    background-color: #474e5d;
    color: #ffffff;
  }
  .bg-3 {
    background-color: #ffffff;
    color: #555555;
  }
  .container-fluid {
    padding-top: 70px;
    padding-bottom: 70px;
  }
  </style>
</head>
<body>

<div class="container-fluid bg-1 text-center">
  <h3>Degala Sai Charan</h3>
  <img style="background-color:Yellow;" class="img-circle" alt="" width="350" height="350">
  <h3>About Pyhton/Flask and Docker </h3>
</div>

<div class="container-fluid bg-2 text-center">
  <h3>Pyhton/Flask</h3>
  <p>
            The pytest framework makes it easy to write small, readable tests, and can scale to support complex
            functional
            testing for applications and libraries.
        </p>
        <p>
            The following code is a test to check if 'this' html page is loaded properly.
            Assert is where we look at that resulting state and check if it looks how we’d expect after the dust has
            settled. It’s where we gather evidence to say the behavior does or does not aligns with what we expect. The
            assert in our test is where we take that measurement/observation and apply our judgement to it. Since this
            page
            should have Python/Flask as its heading or in its content, we’d say <b>assert b"Python/Flask" in
            response.data.</b>

        <pre class="dodgerblue big-code">def test_request_page3(client):
    """This makes the 3rd page"""
    response = client.get("/page3")
    assert response.status_code == 200
    assert b"Python/Flask" in response.data</pre>
        </p>


        <h4>Simple Pages</h4>
        <h6>Making the directory</h6>
        <p>
            Make the following directories one inside the other in the given order : simple_pages/templates. <br>
            Inside the templates directory, add all the html files you want to display on your website that extends from
            a base template<br>
        </p>

        <h6>Rendering and loading the pages</h6>
        <ul>
            <li>
                Create a python function in <i><b>docker_flask/app/simple_pages/ </b></i> named
                <i><b>__init__.py</b></i>
            </li>
            <li>
                Using flask, we import classes like Blueprint, render_template and abort tp rout and render our simple
                pages.
            </li>
        </ul>


        <h6>Testing simple pages with pytest</h6>
        <p>
            Create a directory tests in which you can insert the testing file(s) written in python. These tests are run
            on the terminal in <i> services -> Docker/Docker-compose:docker_flask/flask//docker_flask-flask-1 </i> using
            the command <b>pytest</b>.<br>
            When testing, you will find the following output when all tests pass:
        <pre class="big-code"><code>root@0b5144e4d287:/home/myuser# pytest
=============================================== test session starts ===============================================
platform linux -- Python 3.8.12, pytest-7.0.1, pluggy-1.0.0
rootdir: /home/myuser, configfile: pytest.ini, testpaths: tests
plugins: pylint-0.18.0, cov-3.0.0
collected 16 items

tests/calculator_test.py .....                                                                              [ 31%]
tests/context_process_test.py ...                                                                           [ 50%]
tests/simple_pages_test.py ........                                                                         [100%]

=============================================== 16 passed in 0.32s ================================================</code></pre>

        </p>
        <p>
            To run tests, Lint, and Coverage report use this command: <i><b>pytest --pylint --cov</b></i><br>
            Expected output:
        <pre class="big-code"><code>root@9aa67c89098e:/home/myuser# pytest --pylint --cov
========================================================== test session starts ==========================================================
platform linux -- Python 3.8.12, pytest-7.0.1, pluggy-1.0.0
rootdir: /home/myuser, configfile: pytest.ini, testpaths: tests
plugins: pylint-0.18.0, cov-3.0.0
collected 17 items
--------------------------------------------------------------------------------
Linting files
.
--------------------------------------------------------------------------------

tests/__init__.py s                                                                                                               [  5%]
tests/calculator_test.py s.....                                                                                                   [ 41%]
tests/conftest.py s                                                                                                               [ 47%]
tests/context_process_test.py s                                                                                                   [ 52%]
tests/simple_pages_test.py ........                                                                                               [100%]

---------- coverage: platform linux, python 3.8.12-final-0 -----------
Name                                 Stmts   Miss Branch BrPart  Cover
----------------------------------------------------------------------
app/__init__.py                          9      0      0      0   100%
app/context_processors/__init__.py      14      1      0      0    93%
app/simple_pages/__init__.py            10      0      0      0   100%
calculator/__init__.py                  10      0      2      0   100%
tests/calculator_test.py                20      0      0      0   100%
tests/conftest.py                       13      1      0      0    92%
tests/simple_pages_test.py              30      0      0      0   100%
----------------------------------------------------------------------
TOTAL                                  106      2      2      0    98%

2 empty files skipped.


===================================================== 13 passed, 4 skipped in 0.97s =====================================================</code></pre>
        </p>
</div>

<div style="background-color:Pink;" class="container-fluid bg-3 text-center">
  <h3>Docker</h3>
  <p>
    <ol>
        <li>
            Open terminal in the root folder location of the project.
        </li>
        <li>
            Run the command:
           <code><pre>$ docker compose up --build</pre></code>
        </li>
        <li>You will see the container build, which should look something like this:
            <pre> docker compose up --build
[+] Building 1.8s (11/11) FINISHED
 => [internal] load build definition from Dockerfile                       0.1s
 => => transferring dockerfile: 32B                                        0.0s
 => [internal] load .dockerignore                                          0.1s
 => => transferring context: 34B                                           0.0s
 => [internal] load metadata for docker.io/library/python:3.8-buster       1.2s
 => [auth] library/python:pull token for registry-1.docker.io              0.0s
 => [internal] load build context                                          0.1s
 => => transferring context: 73.27kB                                       0.1s
 => [1/5] FROM docker.io/library/python:3.8-buster@sha256:f71ea6cc6e2d5c2  0.0s
 => => resolve docker.io/library/python:3.8-buster@sha256:f71ea6cc6e2d5c2  0.0s
 => CACHED [2/5] COPY requirements.txt .                                   0.0s
 => CACHED [3/5] RUN apt-get update &&    /usr/local/bin/python3 -m pip i  0.0s
 => CACHED [4/5] WORKDIR /home/myuser                                      0.0s
 => [5/5] COPY --chown=myuser:myuser . .                                   0.2s
 => exporting to image                                                     0.1s
 => => exporting layers                                                    0.1s
 => => writing image sha256:283895504565f1c8afb5bb097e273f48e5ed09d42faa2  0.0s
 => => naming to docker.io/library/docker_flask_flask                      0.0s
[+] Running 1/1
 ⠿ Container docker_flask-flask-1  Rec...                                  2.3s
Attaching to docker_flask-flask-1
docker_flask-flask-1  |  * Serving Flask app 'app' (lazy loading)
docker_flask-flask-1  |  * Environment: development
docker_flask-flask-1  |  * Debug mode: on
docker_flask-flask-1  |  * Running on all addresses.
docker_flask-flask-1  |    WARNING: This is a development server. Do not use it in a production deployment.
docker_flask-flask-1  |  * Running on http://172.20.0.2:5000/ (Press CTRL+C to quit)
docker_flask-flask-1  |  * Restarting with stat
docker_flask-flask-1  |  * Debugger is active!
docker_flask-flask-1  |  * Debugger PIN: 581-910-567

</pre>


        </li>
        <li>
            Open your browser and type "localhost", and you should see your web application hosted on your local
            machine.
        </li>
        <li>
            Login to heroku on your web browser, open your app container and click on open app then you can see your web
            app hosted on the heroku server.
        </li>
    </ol>
    <h4>Other Docker commands</h4>
    <ol>
        <li>
            To view all docker containers on your machine, run:
            <code><pre>$ docker ps</pre></code>
            Where ps stands for Process Status<br><br>
        </li>
        <li>
            If you want to start docker on a specific port on your machine, run:
            <code><pre>$ docker run -dp 80:80 docker/docker_flask_2</pre></code>
            You’ll notice a few flags being used. Here’s some more info on them:
            <ul>
                <li>-d <- run the container in detached mode (in the background)</li>
                <li>-p 80:80 <- map port 80 of the host to port 80 in the container</li>
                <li>docker/getting-started <- the image to use</li>
            </ul>
        </li>
        <li>
            To build an updated version of the image:
            <code><pre>$ docker build -t  .</pre></code>
            <ul>
                <li>the -t flag tags our image.</li>
            </ul>
        <li>
            To start a new container,
            <code><pre>$ docker run -dp 3000:3000 docker_flask_2</pre></code>
        </li>
        <li>
            Use the docker stop command to stop the container.
            <code><pre>$ docker stop [the-container-id]</pre></code>
        </li>
        <li>
            Once the container has stopped, you can remove it by using the "docker rm" command.
            <code><pre>$docker rm [the-container-id]</pre></code>

        </li>
        <li>
            If you want to kill a container, run:
            <code><pre>$ docker kill [ContainerID]</pre></code>
        </li>
        <li>
            You can kill multiple containers like this:
            <code><pre>$ docker kill [ContainerID] [ContainerID] [ContainerID]</pre></code>
        </li>
    </ol>

    </p>
</div>

</body>
</html>
{% endblock %}